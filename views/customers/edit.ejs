<%- include('../layout') %>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="main-content">
        <div class="container mt-4">
            <h4 class="mb-4">
                <i class="fas fa-edit text-primary me-2"></i>
                Edit Customer: <%= customer.name %>
            </h4>

            <% if (error) { %>
                <div class="alert alert-danger">
                    <i class="fas fa-exclamation-circle me-2"></i>
                    <%= error %>
                </div>
                <% } %>

                    <form method="POST" action="/customers/edit/<%= customer._id %>">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Full Name</label>
                                <input type="text" name="name" class="form-control" value="<%= customer.name %>"
                                    required>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label">Email</label>
                                <input type="email" name="email" class="form-control" value="<%= customer.email %>"
                                    required>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label">Phone</label>
                                <input type="text" name="phone" class="form-control" value="<%= customer.phone %>"
                                    required>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label">City</label>
                                <input type="text" name="city" class="form-control" value="<%= customer.city || '' %>">
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label">Customer Type</label>
                                <select name="customerType" class="form-select">
                                    <option value="individual" <%=customer.customerType==='individual' ? 'selected' : ''
                                        %>>Individual</option>
                                    <option value="business" <%=customer.customerType==='business' ? 'selected' : '' %>
                                        >Business</option>
                                </select>
                            </div>

                            <!-- <div class="col-md-6 mb-3">
                <label class="form-label">Company Name</label>
                <input type="text" name="companyName" class="form-control" value="<%= customer.companyName || '' %>">
            </div> -->

                            <!-- <div class="col-md-6 mb-3">
                <label class="form-label">GST Number</label>
                <input type="text" name="gst" class="form-control" value="<%= customer.gst || '' %>">
            </div> -->

                            <div class="col-md-6 mb-3">
                                <label class="form-label">Assigned To</label>
                                <select name="assignedTo" class="form-select">
                                    <option value="">Unassigned</option>
                                    <% users.forEach(user=> { %>
                                        <option value="<%= user._id %>" <%=customer.assignedTo &&
                                            customer.assignedTo.toString()===user._id.toString() ? 'selected' : '' %>>
                                            <%= user.name %>
                                        </option>
                                        <% }) %>
                                </select>
                            </div>

                            <!-- <div class="col-md-12 mb-3">
                <label class="form-label">Notes</label>
                <textarea name="notes" class="form-control" rows="3"><%= customer.notes || '' %></textarea>
            </div> -->

                            <div class="col-12 mt-3 d-flex justify-content-between">
                                <a href="/customers" class="btn btn-outline-secondary">
                                    <i class="fas fa-arrow-left me-1"></i> Cancel
                                </a>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-1"></i> Update Customer
                                </button>
                            </div>
                        </div>
                    </form>
        </div>
    </div>
</body>

</html>