<%- include('../layout') %>
  <!DOCTYPE html>
  <html>

  <head>
    <title>Add Contact</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  </head>

  <body>
    <div class="main-content">
      <div class="container">
        <h2>Add New Contact</h2>

        <% if (error) { %>
          <div class="alert alert-danger">
            <%= error %>
          </div>
          <% } %>

            <form method="POST" action="/contact/add" enctype="multipart/form-data">
              <div class="row">
                <div class="col-md-6">
                  <div class="card mb-4">
                    <div class="card-header">Contact Information</div>
                    <div class="card-body">
                      <div class="mb-3">
                        <label class="form-label">First Name *</label>
                        <input type="text" name="firstName" class="form-control" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Last Name *</label>
                        <input type="text" name="lastName" class="form-control" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Client</label>
                        <select name="client" class="form-control">
                          <option value="">Select Client</option>
                          <% clients.forEach(client=> { %>
                            <option value="<%= client._id %>">
                              <%= client.clientName %>
                            </option>
                            <% }) %>
                        </select>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Phone Number *</label>
                        <input type="text" name="phoneNumber" class="form-control" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Job Title</label>
                        <input type="text" name="jobTitle" class="form-control">
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="card mb-4">
                    <div class="card-header">Additional Information</div>
                    <div class="card-body">
                      <div class="mb-3">
                        <label class="form-label">Email *</label>
                        <input type="email" name="email" class="form-control" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Fax</label>
                        <input type="text" name="fax" class="form-control">
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Source</label>
                        <select name="clientSource" class="form-control">
                          <option value="">Select Source</option>
                          <% sources.forEach(source=> { %>
                            <option value="<%= source._id %>">
                              <%= source.name %>
                            </option>
                            <% }) %>
                              <option value="Other">Other</option>
                        </select>
                      </div>

                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="card mb-4">
                    <div class="card-header">Billing Address Information</div>
                    <div class="card-body">
                      <div class="mb-3">
                        <label class="form-label">Street *</label>
                        <input type="text" name="billingStreet" class="form-control" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">City *</label>
                        <input type="text" name="billingCity" class="form-control" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">State *</label>
                        <input type="text" name="billingState" class="form-control" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Postal Code *</label>
                        <input type="text" name="billingCode" class="form-control" required>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Country *</label>
                        <select name="billingCountry" class="form-control" required>
                          <option value="">Select Country</option>
                          <option value="US">United States</option>
                          <option value="UK">United Kingdom</option>
                          <option value="CA">Canada</option>
                          <option value="IN">India</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="card mb-4">
                    <div class="card-header">Shipping Address Information</div>
                    <div class="card-body">
                      <div class="mb-3 form-check">
                        <input type="checkbox" name="shippingSameAsBilling" class="form-check-input" id="sameAsBilling">
                        <label class="form-check-label" for="sameAsBilling">Same as Billing Address</label>
                      </div>

                      <div id="shippingFields">
                        <div class="mb-3">
                          <label class="form-label">Street</label>
                          <input type="text" name="shippingStreet" class="form-control">
                        </div>

                        <div class="mb-3">
                          <label class="form-label">City</label>
                          <input type="text" name="shippingCity" class="form-control">
                        </div>

                        <div class="mb-3">
                          <label class="form-label">State</label>
                          <input type="text" name="shippingState" class="form-control">
                        </div>

                        <div class="mb-3">
                          <label class="form-label">Postal Code</label>
                          <input type="text" name="shippingCode" class="form-control">
                        </div>

                        <div class="mb-3">
                          <label class="form-label">Country</label>
                          <select name="shippingCountry" class="form-control">
                            <option value="">Select Country</option>
                            <option value="US">United States</option>
                            <option value="UK">United Kingdom</option>
                            <option value="CA">Canada</option>
                            <option value="IN">India</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="card mb-4">
                <div class="card-header">Attachment Information</div>
                <div class="card-body">
                  <div class="mb-3">
                    <label class="form-label">Attachments</label>
                    <input type="file" name="attachments" class="form-control" multiple>
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label">Assigned To</label>
                <select name="assignedTo" class="form-control">
                  <% users.forEach(user=> { %>
                    <option value="<%= user._id %>">
                      <%= user.name %>
                    </option>
                    <% }) %>
                </select>
              </div>

              <button type="submit" class="btn text-white" style="background-color: #343a40;">Create Contact</button>
            </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.getElementById('sameAsBilling').addEventListener('change', function () { // jab ham shipping k check box me check karte he to shipping ka data block ho jata he 
        const shippingFields = document.getElementById('shippingFields');
        shippingFields.style.display = this.checked ? 'none' : 'block';
      });
    </script>
  </body>

  </html>